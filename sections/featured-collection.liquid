{% assign collection = section.settings.collection.products %}
<style>

  /* Fixed height card */
  .card {
    width: 100%;
    height: 420px;
    display: flex;
    flex-direction: column;
  }

  /* Card body layout */
  .card-body {
    display: flex;
    flex-direction: column;
    padding: 1rem;
  }

  /* Image styling */
  .card-body img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    margin-bottom: 0.75rem;
  }

  .product-info {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

  /* Title control */
  .product-info p.text-truncate {
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .CTA {
    margin-top: auto;
  }
</style>

<div class="featured-collection-section">
  <div class="container" data-section="{{section.id}}">

    <div class="section-header">

      <h1 class="heading">{{ section.settings.heading }}</h1>

      {% if section.settings.sub_heading != blank %}
        <div class="sub-heading">
          {{ section.settings.sub_heading }}
        </div>
      {% endif %}

    </div>

    <div class="row">
      {% for product in collection %}
        <div class="col-md-3 card-out ">
          <div class="card my-2">
            <div class="card-body">
              {{ product.featured_image | image_url: width: 300 | image_tag }}
              <div class="product-info">
                <p class="text-truncate">
                  <strong>
                    {{ product.title }}
                  </strong>
                </p>
                <p>Price: {{ product.price | money }}</p>
                <div class="CTA">
                  <a href="{{product.url}}" class="btn btn-primary w-100">View Details</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      {% else %}

        {% for item in (1..8) %}
          <div class="col-md-3 ">
            <div class="card my-2">
              <div class="card-body">

                {%- capture current -%}
                {%- cycle 1,2,3,4 -%}
                {%- endcapture -%}

                {{ 'product-apparel-' | append: current | placeholder_svg_tag: 'placeholder_svg' }}

                <div class="product-info">
                  <p class="text-truncate">
                    <strong>
                      {{ product.title }}
                    </strong>
                  </p>
                  <p>Price: 24$</p>
                  <p>Lorem ipsum dolor sit, adipisicing elit. Optio, eveniet?</p>
                  <div class="CTA">
                    <a href="#" class="btn btn-secondary w-100">View Details</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}

      {% endfor %}

    </div>
  </div>

  {% comment %} Add blocks to any section {% endcomment %}
{% for item in section.blocks %}
  {% case item.type %}
    {% when "@theme" %}
      {% render item %}
    {% else %}
      {% comment %} {% render item %} {% endcomment %}
  {% endcase %}
{% endfor %}

</div>

{% schema %}
  {
    "name": "Featured collection",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "heading",
        "default": "Featured collection"
      }, {
        "type": "richtext",
        "id": "sub_heading",
        "label": "Sub Heading"
      }, {
        "type": "collection",
        "id": "collection",
        "label": "Select collection"
      }
    ],
    "blocks": [{
      "type": "@theme"
    }],
    "presets": [
      {
        "name": "Featured collection",
        "category": "collection"
      }
    ]
  }


{% endschema %}